(function(h){var m={},d=true;if(!reisen_customizer_vars.need_refresh){for(var f in reisen_color_schemes){m[f]=wp.template("reisen-color-scheme-"+f)}m.fonts=wp.template("reisen-fonts")}h.bind("ready",function(){if(reisen_customizer_vars.need_refresh){jQuery("#customize-header-actions .spinner").after('<input type="button" class="button customize-action-refresh" value="'+reisen_customizer_vars.msg_refresh+'">');jQuery("#customize-header-actions .customize-action-refresh").on("click",function(i){h.previewer.send("refresh-preview");setTimeout(function(){h.previewer.refresh()},500)})}jQuery("#customize-theme-controls .control-section").each(function(){b(jQuery(this))});o(h("color_scheme")())});h.bind("change",function(i){if(i.id=="scheme_storage"){return}b(jQuery("#customize-theme-controls #customize-control-"+i.id).parents(".control-section"));g(i)});function b(i){i.find(".customize-control").each(function(){var r=jQuery(this).attr("id");if(r==undefined){return}r=r.replace("customize-control-","");var q=false;for(var t in reisen_dependencies){if(t==r){q=reisen_dependencies[r];break}}if(q){var y=0,x=0;var v=typeof q.compare!="undefined"?q.compare.toLowerCase():"and";var z=typeof q.strict!="undefined";var t=null,s="";for(var w in q){if(w=="compare"||w=="strict"){continue}x++;t=i.find('[data-customize-setting-link="'+w+'"]');if(t.length>0){s=t.attr("type")=="checkbox"||t.attr("type")=="radio"?(t.parents(".customize-control").find("[data-customize-setting-link]:checked").length>0?t.parents(".customize-control").find("[data-customize-setting-link]:checked").val():0):t.val();if(s===undefined){s=""}for(var u in q[w]){if((q[w][u]=="not_empty"&&s!="")||(q[w][u]=="is_empty"&&s=="")||(s!==""&&(!isNaN(q[w][u])?s==q[w][u]:(z?s==q[w][u]:s.indexOf(q[w][u])==0)))||(s!=""&&q[w][u].charAt(0)=="^"&&s.indexOf(q[w][u].substr(1))==-1)){y++;break}}}else{x--}if(y>0&&v=="or"){break}}if((y>0&&v=="or")||(y==x&&v=="and")){jQuery(this).show().removeClass("reisen_options_no_use")}else{jQuery(this).hide().addClass("reisen_options_no_use")}}})}function g(r){if(r.transport!="postMessage"){return}var w=r.id,s=r();var v=false;if(w=="color_scheme"){o(s)}else{if(d){var u=h("color_settings")()=="simple";for(var q in reisen_color_schemes.original){if(q==w){d=false;k(q,s);if(u){if(w=="text_link"){h("alter_link").set(s);h.control("alter_link").container.find(".color-picker-hex").data("data-default-color",s).wpColorPicker("defaultColor",s);k("alter_link",s)}else{if(w=="text_hover"){h("alter_hover").set(s);h.control("alter_hover").container.find(".color-picker-hex").data("data-default-color",s).wpColorPicker("defaultColor",s);k("alter_hover",s)}}}d=true;v=true;break}}if(!v){for(var i in reisen_fonts){for(var t in reisen_fonts[i]){if(t=="title"||t=="description"){continue}if(i+"-"+t==w){v=true;e(i,t,s);break}}if(v){break}}}if(v){a()}}}if(!v){h.previewer.send("refresh-other-controls",{id:w,value:s})}}function k(i,q){reisen_color_schemes[h("color_scheme")()][i]=q;h("scheme_storage").set(reisen_serialize(reisen_color_schemes))}function o(q){d=false;for(var i in reisen_color_schemes[q]){if(h(i)==undefined){continue}h(i).set(reisen_color_schemes[q][i]);h.control(i).container.find(".color-picker-hex").data("data-default-color",reisen_color_schemes[q][i]).wpColorPicker("defaultColor",reisen_color_schemes[q][i])}d=true;a()}function e(i,r,q){reisen_fonts[i][r]=q}function a(){if(!d||reisen_customizer_vars.need_refresh){return}var v="";for(var t in reisen_color_schemes){var r=[];for(var u in reisen_color_schemes[t]){if(u=="title"){continue}r[u]=reisen_color_schemes[t][u]}r=j(r);v+=m[t](r)}var w=[],s=[];for(var q in reisen_fonts){s=reisen_fonts[q];w[q+"_font-family"]=s["font-family"]&&s["font-family"]!="inherit"?'font-family:"'+s["font-family"]+'";':"";w[q+"_font-size"]=s["font-size"]&&s["font-size"]!="inherit"?"font-size:"+p(s["font-size"])+";":"";w[q+"_line-height"]=s["line-height"]&&s["line-height"]!="inherit"?"line-height:"+p(s["line-height"])+";":"";w[q+"_line-height_value"]=s["line-height"]?p(s["line-height"]):"inherit";w[q+"_font-weight"]=s["font-weight"]&&s["font-weight"]!="inherit"?"font-weight:"+s["font-weight"]+";":"";w[q+"_font-style"]=s["font-style"]&&s["font-style"]!="inherit"&&s["font-style"].indexOf("i")>=0?"font-style:italic;":"";w[q+"_text-decoration"]=s["font-style"]&&s["font-style"]!="inherit"&&s["font-style"].indexOf("u")>=0?"text-decoration:underline;":"";w[q+"_margin-top"]=s["margin-top"]&&s["margin-top"]!="inherit"?"margin-top:"+p(s["margin-top"])+";":"";w[q+"_margin-top_value"]=s["margin-top"]?p(s["margin-top"]):"inherit";w[q+"_margin-bottom"]=s["margin-bottom"]&&s["margin-bottom"]!="inherit"?"margin-bottom:"+p(s["margin-bottom"])+";":"";w[q+"_margin-bottom_value"]=s["margin-bottom"]?p(s["margin-bottom"]):"inherit"}if(window.reisen_customizer_wp_add_theme_fonts){w=l(w)}v+=m.fonts(w);h.previewer.send("refresh-customizer-css",v)}function p(q){if(q!=""&&q!="inherit"){var i=q.substr(-1);if("0"<=i&&i<="9"){q+="px"}}return q}function c(s,r){var i=/([\d\.]+)([a-zA-Z%]*)/i;if(s!=""&&s!="inherit"){var q=s.match(i);if(q[1]){s=(q[1]*r)+(q.length>2?q[2]:"px")}}return s}function n(t,s){var r=/([\d\.]+)([a-zA-Z%]*)/i;if(t!="inherit"&&s!="inherit"&&(t!=""||s!="")){if(!t){t="0"}if(!s){s="0"}var q=t.match(r);var i=s.match(r);if(q[1]&&i[1]){t=(parseFloat(q[1])+parseFloat(i[1]))+(q.length>2?q[2]:"px")}}return t}function j(i){i.text_dark_0_05=Color(i.text_dark).toCSS("rgba",0.05);i.text_dark_0_1=Color(i.text_dark).toCSS("rgba",0.1);i.text_dark_0_8=Color(i.text_dark).toCSS("rgba",0.8);i.text_link_0_3=Color(i.text_link).toCSS("rgba",0.3);i.text_link_0_6=Color(i.text_link).toCSS("rgba",0.6);i.text_link_0_8=Color(i.text_link).toCSS("rgba",0.8);i.text_hover_0_2=Color(i.text_hover).toCSS("rgba",0.2);i.text_hover_0_3=Color(i.text_hover).toCSS("rgba",0.3);i.text_hover_0_8=Color(i.text_hover).toCSS("rgba",0.8);i.inverse_text_0_1=Color(i.inverse_text).toCSS("rgba",0.1);i.bg_color_0_8=Color(i.bg_color).toCSS("rgba",0.8);i.alter_text_0_1=Color(i.alter_text).toCSS("rgba",0.1);i.alter_bg_color_0_8=Color(i.alter_bg_color).toCSS("rgba",0.8);i.alter_bg_hover_0_5=Color(i.alter_bg_hover).toCSS("rgba",0.5);i.alter_bd_color_0_1=Color(i.alter_bd_color).toCSS("rgba",0.1);return i}function l(i){i["logo_margin-top_0_75"]=c(i["logo_margin-top_value"],0.75);i["logo_margin-bottom_0_5"]=c(i["logo_margin-bottom_value"],0.5);i["menu_margin-top_1"]=i["menu_margin-top_value"];i["menu_margin-top_0_3"]=c(i["menu_margin-top_value"],0.3);i["menu_margin-top_0_6"]=c(i["menu_margin-top_value"],0.6);i["menu_margin-top_0_65"]=c(i["menu_margin-top_value"],0.65);i["menu_margin-top_0_7"]=c(i["menu_margin-top_value"],0.7);i["menu_margin-top_0_8"]=c(i["menu_margin-top_value"],0.8);i["menu_margin-bottom_1"]=i["menu_margin-bottom_value"];i["menu_margin-bottom_0_5"]=c(i["menu_margin-bottom_value"],0.5);i["menu_margin-bottom_0_6"]=c(i["menu_margin-bottom_value"],0.6);i.menu_height_1=n(n(i["menu_margin-top_value"],i["menu_margin-bottom_value"]),i["menu_line-height_value"]);i["submenu_margin-top_1"]=i["submenu_margin-top_value"];i["submenu_margin-bottom_1"]=i["submenu_margin-bottom_value"];return i}})(wp.customize);